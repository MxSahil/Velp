<%- include("partials/header") %>
<div class="container">
  <div class="row mt-4">

    <div class="col-md-6 mb-3 img-container">
      <img class="rounded mx-auto d-block" alt="<%=game.title%> image" src="<%=game.image%>">
    </div>

    <div class="col-md-6 mb-3 details-container">
      <h1><%=game.title%></h1>
      <p><%=game.description%></p>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col" class="border-bottom-0"></th>
            <th scope="col" class="border-bottom-0"></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">Platforms</th>
            <% var feature = ""; %>
            <% for(i = 0; i < game.platforms.length; i++) { %>
            <%    feature = feature + game.platforms[i] + ", " %>
            <% } %>
            <td><%= feature.substring(0, feature.length - 2) %></td>
          </tr>

          <tr>
            <th scope="row">Genres</th>
            <% feature = ""; %>
            <% for(i = 0; i < game.genres.length; i++) { %>
            <%    feature = feature + game.genres[i] + ", " %>
            <% } %>
            <td><%= feature.substring(0, feature.length - 2) %></td>
          </tr>

          <tr>
            <th scope="row">ESRB Rating</th>
            <td><%= game.esrb %></td>
          </tr>

          <tr>
            <th scope="row">Metacritic Score</th>
            <td><%= game.metacritic %></td>
          </tr>

          <tr>
            <th scope="row">Release Date</th>
            <td><%= game.releaseDate %></td>
          </tr>

          <tr>
            <th scope="row">Developers</th>
            <% feature = ""; %>
            <% for(i = 0; i < game.developer.length; i++) { %>
            <%    feature = feature + game.developer[i] + ", " %>
            <% } %>
            <td><%= feature.substring(0, feature.length - 2) %></td>
          </tr>

          <tr>
            <th scope="row">Publishers</th>
            <% feature = ""; %>
            <% for(i = 0; i < game.publisher.length; i++) { %>
            <%    feature = feature + game.publisher[i] + ", " %>
            <% } %>
            <td><%= feature.substring(0, feature.length - 2) %></td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-center">
        <a href="/games/<%=game._id%>/edit">
          <button type="button" class="btn btn-outline-success btn-lg btn-block mx-3">Edit Game</button>
        </a>

        <form action="/games/<%=game._id%>?_method=DELETE" method="POST">
          <button type="submit" class="btn btn-outline-danger btn-lg btn-block mx-3">Delete Game</button>
        </form>
      </div>

      <!-- <div class="row">
        <div class="col-4">
          <img class="mx-auto d-block game-experience-icons" alt="Want"  src="https://icons.iconarchive.com/icons/danieledesantis/christmas/512/gift-icon.png">
          <h4 class="game-experience-text">Want</h4>
        </div>

        <div class="col-4">
          <img class="mx-auto d-block game-experience-icons" alt="Playing"  src="https://static.thenounproject.com/png/2879647-200.png">
          <h4 class="game-experience-text">Playing</h4>
        </div>

        <div class="col-4">
          <img class="mx-auto d-block game-experience-icons" alt="Completed"  src="https://static.thenounproject.com/png/463939-200.png">
          <h4 class="game-experience-text">Completed</h4>
        </div>
      </div> -->

    </div>
  </div>

  <h5 class="CommentSection">
    Comments Section
  </h5>

  <a href="/games/<%=game._id%>/comments/new">
    <button type="button" class="btn btn-outline-primary btn-lg btn-block mb-3">Add Comment</button>
  </a>

  <div class="col-md-12 mb-3 details-container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col" class="border-bottom-0 col-2">Username</th>
          <th scope="col" class="border-bottom-0 col-2"></th>
          <th scope="col" class="border-bottom-0 col-8">Comment</th>
        </tr>
      </thead>
      <tbody>

        <% comments.forEach((c => { %>
        <tr>
          <td scope="row" style="word-wrap: break-word"><%=c.user.username%></td>
          <td>
            <!-- <div class="d-flex justify-content-around flex-column"> -->
              <a class="btn btn-outline-success btn-sm btn-block mx-1 mb-1 w-75" href="/games/<%=game._id%>/comments/<%=c._id%>/edit">
                Edit
              </a>
              <form action="/games/<%=game._id%>/comments/<%=c._id%>?_method=DELETE" method="POST">
                <button type="submit" class="btn btn-outline-danger btn-sm btn-block mx-1 mb-1 w-75">
                  Delete
                </button>
              </form>
            <!-- </div> -->
          </td>
          <td style="word-wrap: break-word;min-width: 160px;max-width: 160px;"><%=c.text%></td>
        </tr>
        <% })) %>
      </tbody>
    </table>

    <div class="py-3"> </div>

  </div>
</div>

<%- include("partials/footer") %>
